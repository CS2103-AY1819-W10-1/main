<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Rayner Lim - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">README</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2103-AY1819S2-W10-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Rayner Lim - Project Portfolio</h1></div><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hello! I am Rayner Lim, a Computer Science student at the National University of Singapore.
I design and code, and am passionate about building great products, services &amp; systems.
Here you can find my contributions to one of my projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-readme"><a class="link" href="#project-readme">PROJECT: README</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>My team and I were tasked with enhancing a basic address book desktop application with a command line interface (CLI) for our Software Engineering project.
We decided to morph it into an integrated bookmark manager and web feed aggregator called README.</p>
</div>
<div class="paragraph">
<p>This product helps heavy web content consumers read more productively, efficiently and comfortably by keeping everything they want to read in one place,
with powerful organization options, offline support, web feed aggregation and a reading view mode as key features.</p>
</div>
<div class="paragraph">
<p>Users interact with it using a command line interface (CLI), and it has a graphical user interface (GUI) created with JavaFX. It is written in Java, and has about 10,000 lines of code.</p>
</div>
<div class="paragraph">
<p>My role was to design and implement the Reader View feature, which gives users a better reading experience, as well as the user interface (UI).
The following sections illustrate these enhancements in more detail, as well as the relevant sections I have added to the user and developer guides in relation to these enhancements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: I added the <strong>Reader View</strong> feature</p>
<div class="ulist">
<ul>
<li>
<p>What it does: The <strong>Reader View</strong> provides a clean, minimalist reading experience by stripping out all the visual clutter from web pages and presents content in a perfectly formatted, clean layout, with user-selectable colour schemes.</p>
</li>
<li>
<p>Justification: This feature improves the user experience significantly because it lets users focus on consuming content without any unnecessary distractions and helps them read more comfortably, thus improving productivity.</p>
</li>
<li>
<p>Highlights: This enhancement required analysis of design alternatives to open it up for usage in as many scenarios as possible. The implementation was challenging as it required managing complex state. It also required an in-depth understanding of the JavaFX WebView component, as well as knowledge of the HTML Document Object Model and CSS styling.</p>
</li>
<li>
<p>Credits: The <a href="https://github.com/dankito/Readability4J">Readability4J</a> library does the heavy lifting of extracting a web pageâ€˜s relevant content and removing clutter from it. I used the <a href="https://jsoup.org/">Jsoup</a> library to extract additional useful metadata, and combined this with the results from Readability4J into a new web page, where I used the <a href="https://getbootstrap.com/">Bootstrap</a> framework to layout content and adapted the <a href="https://bootswatch.com/litera/">Bootswatch Litera</a> theme into different colour schemes for presenting content.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: I added a navigation sidebar UI component that helps users create a mental model of the app structure,
and also offers convenient access to the major areas of the app.
This required modifying the existing design to decouple displaying of command results from user-entered commands.
It also supports asynchronous commands in future that can return an initial result first, do some long-running work, and then return another final result.</p>
</li>
<li>
<p><strong>Minor enhancement</strong>: I added an autofill utility that lets users specify just a link when adding a new entry and have the title and description fields automatically filled.
This makes adding links to our appvery convenient for users.</p>
</li>
<li>
<p><strong>Code contributed</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Reader View:  <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/184">#184</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/111">#111</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/98">#98</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/44">#44</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/32">#32</a></p>
</li>
<li>
<p>Navigation sidebar UI component with design change: <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/160">#160</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/31">#31</a></p>
</li>
<li>
<p>Autofill when adding new entry: <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/116">#116</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/76">#76</a></p>
</li>
<li>
<p>Status bar footer UI component enhancement: <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/101">#101</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>There were a total of 5 releases, from version <code>1.1</code> to <code>1.4</code>. I managed release <code>v1.2</code> on <a href="https://github.com/CS2103-AY1819S2-W10-1/main/releases/tag/v1.2">GitHub</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>UI restyling (Pull request <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/101">#101</a>)</p>
</li>
<li>
<p>Redesigned the status bar footer UI component to include context information (Pull request <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/101">#101</a>)</p>
</li>
<li>
<p>Integrated Google News Search on top of RSS feed reading capability by team-mate <a href="https://cs2103-ay1819s2-w10-1.github.io/main/team/qjqqyy.html">Qiji</a> (Pull request <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/121">#121</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Restructured the User Guide to be more reader-friendly: <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/101">#96</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/83">#83</a></p>
</li>
<li>
<p>Minor updates to documentation: <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/197">#197</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/134">#134</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/12">#12</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/7">#7</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments): <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/21">#21</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/33">#33</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/35">#35</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/80">#80</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/173">#173</a></p>
</li>
<li>
<p>Contributed to forum discussions (example:  <a href="https://github.com/nus-cs2103-AY1819S2/forum/issues/39">1</a>, <a href="https://github.com/nus-cs2103-AY1819S2/forum/issues/43">2</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated third party libraries Readability4J and FontAwesomeFX to the project (<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/160">#160</a>, <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/111">#111</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="changing-the-view-mode-code-view-code"><a class="link" href="#changing-the-view-mode-code-view-code">Changing the view mode: <code>view</code></a></h4>
<div class="paragraph">
<p>Changes the view mode between the original browser view or the reader view for a more comfortable reading experience.</p>
</div>
<div class="paragraph">
<p><span class="underline">Format</span>: <code>view MODE(browser, reader) [s/STYLE(default, sepia, dark, black)]</code></p>
</div>
<div class="paragraph">
<p><span class="underline">Examples</span>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to the browser view mode, which displays web pages as they would appear in a web browser.<br></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view browser</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ug-view/BrowserView.png" alt="BrowserView" width="720">
</div>
<div class="title">Figure 1. A web page with many distracting elements like advertisements in browser view</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to the reader view mode, which strips away clutter and presents content in a clean layout.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view reader</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ug-view/ReaderView.png" alt="ReaderView" width="720">
</div>
<div class="title">Figure 2. The same web page in reader view - with clutter stripped away more actual content is visible</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to the reader view mode with sepia colour scheme</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view reader s/sepia</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ug-view/ReaderViewSepia.png" alt="ReaderViewSepia" width="720">
</div>
<div class="title">Figure 3. A web page in reader view with sepia colour scheme</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to the reader view mode with dark colour scheme</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view reader s/dark</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ug-view/ReaderViewDark.png" alt="ReaderViewDark" width="720">
</div>
<div class="title">Figure 4. A web page in reader view with dark colour scheme</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Switch to the reader view mode with black colour scheme</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>view reader s/black</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ug-view/ReaderViewBlack.png" alt="ReaderViewBlack" width="720">
</div>
<div class="title">Figure 5. A web page in reader view with black colour scheme</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="link" href="#features">Features</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview-2"><a class="link" href="#overview-2">Overview</a></h3>
<div class="sect3">
<h4 id="link-saving-and-management-read-anything"><a class="link" href="#link-saving-and-management-read-anything">Link Saving and Management - Read Anything</a></h4>
<div class="paragraph">
<p>README helps you capture the content that you discover online.</p>
</div>
<div class="paragraph">
<p>Save the latest news stories, magazine articles, recipes, how-tos â€“ anything you discover online.
Whenever you find a web page you want to read later, add it to your reading list in README.
To help you organize the mountain of content, README lets you tag link so you can always find what you&#8217;re looking for,
and archive or delete links you&#8217;ve finished reading so your reading list won&#8217;t become cluttered.</p>
</div>
</div>
<div class="sect3">
<h4 id="web-feeds-subscription-read-more"><a class="link" href="#web-feeds-subscription-read-more">Web Feeds Subscription - Read More</a></h4>
<div class="paragraph">
<p>README keeps you up to date with your favourite websites.</p>
</div>
<div class="paragraph">
<p>Integrations with Bing Web Search and Google News mean you&#8217;ll never run out of things to read.
Search for particular topics you&#8217;d like to know more about or just read the top news stories - it&#8217;s up to you.
As README also functions as a feed reader, you can subscribe and unsubscribe from any RSS or Atom feed available on the Internet.
Whenever you open README, the latest content from your subscribed feeds is automatically added to your reading list.</p>
</div>
</div>
<div class="sect3">
<h4 id="offline-support-read-anywhere"><a class="link" href="#offline-support-read-anywhere">Offline Support - Read Anywhere</a></h4>
<div class="paragraph">
<p>README lets you read offline, even on airplanes, trains, or on Wi-Fi-only devices away from Internet connections.</p>
</div>
<div class="paragraph">
<p>Whenever you save a link, README automatically downloads its web page to your personal computer if there is an Internet connection.
This gives you the convenience of viewing your saved links anywhere, anytime, even if there is no Internet connection.
If you still want to keep a link but no longer need to view it offline, you can archive it.
This will delete its downloaded web page from your personal computer.</p>
</div>
</div>
<div class="sect3">
<h4 id="reader-view-read-better"><a class="link" href="#reader-view-read-better">Reader View - Read Better</a></h4>
<div class="paragraph">
<p>README makes your long reading sessions so much more comfortable.</p>
</div>
<div class="paragraph">
<p>Reader View strips out all the visual clutter from web pages and presents content in a perfectly formatted, clean layout,
so you can focus on the content without any unnecessary distractions.
You can even choose the colour scheme that suits you best -
try the white or sepia style if you&#8217;re reading in a lighted environment, or the dark or black styles in a dark environment.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="glossary"><a class="link" href="#glossary">Glossary</a></h3>
<div class="sect3">
<h4 id="common-terms"><a class="link" href="#common-terms">Common Terms</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Feed</strong><br>
A data format used by content providers to provide users with frequently updated content.
Also known as a web feed, they can be found all over the web - you can usually find a link to them titled "RSS feed" or "Atom feed" at the footer of a website.</p>
</li>
<li>
<p><strong>Link</strong><br>
Short for "hyperlink", a reference to a URL you can follow by clicking on its text.</p>
</li>
<li>
<p><strong>Tag</strong><br>
A label attached to an entry for the purpose of identification or to give other information.</p>
</li>
<li>
<p><strong>URL</strong><br>
An address to a web resource, usually beginning with <code>http://</code> or <code>https://</code>.
Stands for Uniform Resource Locator.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="readme-specific-terms"><a class="link" href="#readme-specific-terms">README-specific Terms</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Command</strong><br>
An instruction you type in that makes README perform a function.</p>
</li>
<li>
<p><strong>Entry</strong><br>
The name we use for a single web page that has been added to README.
Similar to a bookmark, comprising URL, Title, and Description fields among others.</p>
</li>
<li>
<p><strong>Context</strong><br>
The Context determines which Entries are displayed and what Commands are available.
The four contexts are Reading List, Archives, Search Results and Feeds. Refer to <a href="#Context">[Context]</a> for more information.</p>
</li>
<li>
<p><strong>Reading List</strong><br>
When you or a web feed that you Subscribe to Adds a new Entry, it is saved to your Reading List.
Entries in your Reading List have their web pages automatically downloaded onto your personal computer for offline viewing.
When youâ€™re finished with an Entry, you can move it to your Archives for safekeeping.</p>
</li>
<li>
<p><strong>Archives</strong><br>
When youâ€™re finished with an Entry but would like to keep it for future reference, you can move it to the Archives.
Archived items will still be available for viewing but will not have their web pages automatically downloaded to your personal computer.
Therefore, youâ€™ll need an Internet connection to view Entries in your Archives.</p>
</li>
<li>
<p><strong>Search Results</strong><br>
When you Search online for new Entries, they are temporarily stored here until you do another Search.
You can Add an Entry from here to your Reading List.</p>
</li>
<li>
<p><strong>Feeds</strong><br>
Feeds you Subscribe to are listed here.
You can Subscribe to a new Feed or Unsubscribe from an existing one.</p>
</li>
<li>
<p><strong>Add</strong><br>
The action of adding a web page as an Entry to your Reading List.
Sometimes we may refer to this as Saving as well.</p>
</li>
<li>
<p><strong>Edit</strong><br>
If you would like to change the URL, Title, or Description fields or Tags of an Entry, you can Edit it.</p>
</li>
<li>
<p><strong>Archive</strong><br>
If youâ€™re finished with an Entry but would like to keep it for future reference, you can Archive it.
This will move the Entry from your Reading List to your Archives. Archived Entries can be Unarchived.</p>
</li>
<li>
<p><strong>Unarchive</strong><br>
If youâ€™ve Archived an Entry but would like its web page to be downloaded to your personal computer, you can Unarchive it.
This will move the Entry from your Archives to your Reading List. Unarchived Entries can be Archived again.</p>
</li>
<li>
<p><strong>Delete</strong><br>
If you do not wish to keep an Entry, you can Delete it.
This will permanently remove an Entry. Deleted Entries cannot be recovered.</p>
</li>
<li>
<p><strong>Find</strong><br>
The action of finding certain existing Entries.
You can narrow down to those that contain certain keywords.</p>
</li>
<li>
<p><strong>Select</strong><br>
If you would like to view an Entry&#8217;s web page, you can Select it.
You can also choose a View Mode.</p>
</li>
<li>
<p><strong>View Mode</strong><br>
The View Mode determines how an Entry&#8217;s web page is displayed.
The two available View Modes are Reader View and Browser View.</p>
</li>
<li>
<p><strong>Reader View</strong><br>
Reader View displays a web page in a simplified layout that makes reading enjoyable and free of distracting ads, fancy layouts, and other extraneous things.
You can customize the colour scheme to meet your own preferences.</p>
</li>
<li>
<p><strong>Browser View</strong><br>
Browser View displays a web page just as it would appear in its original form in your web browser.</p>
</li>
<li>
<p><strong>Search</strong><br>
The action of searching online for new Entries to Add.
You can use Bing Web Search or Google News Search.</p>
</li>
<li>
<p><strong>Subscribe (to a website&#8217;s Feed)</strong><br>
Keep up to date with a website by having any new Entries added to your Reading List.</p>
</li>
<li>
<p><strong>Unsubscribe (from a website&#8217;s Feed)</strong><br>
Stop adding any new Entries from the website to your Reading List.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="reader-view-mode"><a class="link" href="#reader-view-mode">Reader view mode</a></h3>
<div class="paragraph">
<p>The reader view gives users a more focused reading experience by removing clutter and formatting content into a clean and easy-to-read layout.
Letting users choose a colour scheme that fits their lighting environment also makes their reading experience more comfortable.</p>
</div>
<div class="paragraph">
<p>Using the <code>view</code> command, users can switch between the <code>browser</code> and <code>reader</code> view modes, as well as choose a colour scheme using the optional <code>s/STYLE</code> parameter.</p>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>Available view types are specified in the <code>ViewType</code> enum, and available reader view styles are specified in the <code>ReaderViewStyle</code> enum.
The <code>ViewMode</code> object encapsulates a <code>ViewType</code> and <code>ReaderViewStyle</code> and represents a user setting.
The <code>Model</code> exposes an observable <code>viewModeProperty</code>, which is set by <code>ViewModeCommand</code> and observed by <code>BrowserPanel</code>.</p>
</div>
<div class="paragraph">
<p>The <code>BrowserPanel</code> is a wrapper around the JavaFX <code>WebView</code> component, and is responsible for displaying web pages.
It keeps track of whether an internal page, offline page, online page or HTML content is loaded,
and reacts to events like changes in loading status, view mode and selected entry.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/dg-readerview/BrowserStateDiagram.png" alt="BrowserStateDiagram" width="800">
</div>
<div class="title">Figure 6. General state diagram for BrowserPanel.</div>
</div>
<div class="paragraph">
<p>There are two conditions which cause reader view to be generated and loaded:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If an original web page has successfully loaded but the <code>reader</code> view mode is selected,
the reader view is generated from the currently displayed page and loaded, then the CSS stylesheet is changed.
This mechanism is used for online URLs, and was chosen because using the other mechanism below would cause a performance
bottleneck due to having to download online web pages.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/dg-readerview/ReaderViewOfPageDiagram.png" alt="ReaderViewOfPageDiagram" width="800">
</div>
<div class="title">Figure 7. Sequence diagram for loading reader view from current page.</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Alternatively, if the <code>reader</code> view mode is already selected and an offline URL is selected (most probably an entry),
the reader view is generated from directly reading the file pointed to by the offline URL and loaded, then the CSS stylesheet is changed.
This mechanism is used for offline URLs,
and is a performance enhancement as it bypasses waiting for the original web page to load before reader view is loaded.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/dg-readerview/ReaderViewOfHtmlDiagram.png" alt="ReaderViewOfHtmlDiagram" width="800">
</div>
<div class="title">Figure 8. Sequence diagram for loading reader view from offline URL.</div>
</div>
<div class="paragraph">
<p>The Jsoup and Readability4J external libraries do the heavy lifting of parsing the raw HTML currently loaded in the <code>WebView</code> to extract useful metadata and content.
Jsoup was chosen as it is a mature HTML parser library while Readability4J was chosen as it is a port of port of Mozilla&#8217;s excellent Readability.js.
These are combined into a new HTML document, which is styled using Bootstrap and then loaded in the <code>WebView</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/dg-readerview/ReaderViewGenerationActivityDiagram.png" alt="ReaderViewGenerationActivityDiagram" width="400">
</div>
<div class="title">Figure 9. Activity diagram for generation of reader view.</div>
</div>
<div class="paragraph">
<p>As Readability4J does not extract all available and useful metadata information, Jsoup is used to manually extract author information,
as well as <a href="http://ogp.me">Open Graph metadata</a> like published datetime and section information if available.
As Readability4J also does not provide the estimated reading time, Jsoup is used to extract text content from the HTML DOM
Document Object, and reading time is estimated from the number of words present and the average human reading speed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/dg-readerview/InsertMetadataElementActivityDiagram.png" alt="InsertMetadataElementActivityDiagram" width="400">
</div>
<div class="title">Figure 10. Activity diagram for insertion of metadata element.</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-when-reader-view-should-be-generated"><a class="link" href="#aspect-when-reader-view-should-be-generated">Aspect: When reader view should be generated</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Generate reader view on-the-fly from the currently loaded web page.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: More flexible in the situations it can be used, will use less disk space.</p>
</li>
<li>
<p>Cons: May have performance issues because it needs to be generated again every time, more difficult to implement.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> When adding a link, generate reader view and save it to disk.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easier to implement, better performance as reader view is only generated only once for each link.</p>
</li>
<li>
<p>Cons: Will save redundant data and use more disk space.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Why current choice:</strong></p>
</li>
<li>
<p>Since users might be browsing the Internet using our application&#8217;s online search features,
it is not practical to download and save every page when users are likely to be at a particular page only for a short time.
Therefore, generating reader view on-the-fly will open up reader view to our application&#8217;s online search features and add value to them.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-how-reader-view-styles-should-be-specified"><a class="link" href="#aspect-how-reader-view-styles-should-be-specified">Aspect: How reader view styles should be specified</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Hard-code reader view styles in the app.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement, more control over user experience.</p>
</li>
<li>
<p>Cons: Users may not like the hard-coded reader view styles.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Let users add custom stylesheets.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Gives users customization options.</p>
</li>
<li>
<p>Cons: Difficult to implement, stylesheets still need to be based on Bootstrap.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Why current choice:</strong></p>
</li>
<li>
<p>It is a case of diminishing returns.
It is not difficult to implement a design that allows us to add a few reader view styles for users to choose from, which gives them a lot more flexibility compared to not having any styles to choose from.
However, making the design support custom user stylesheets would require much more effort while not giving users a lot more benefit.
The current design makes it very simple for us to add another reader view style, in case many users demand a particular style.
Nevertheless, this is a feature we can consider developing if there is demand for it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="autofill-missing-title-or-description-when-adding-a-link"><a class="link" href="#autofill-missing-title-or-description-when-adding-a-link">Autofill missing title or description when adding a link</a></h3>
<div class="paragraph">
<p>When adding a link using the <code>add</code> command, users only need to specify the <code>URL</code> field.
If the <code>Title</code> or <code>Description</code> field is not specified, they are automatically filled.
This makes adding links much faster and more convenient for users.</p>
</div>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h4>
<div class="paragraph">
<p>Autofill-related code lies in the <code>EntryAutofill</code> utility class.
The constructor takes in the original <code>Title</code> and <code>Description</code>,
and there are methods to parse URL and HTML in order to extract replacement candidates,
as well as to get the best <code>Title</code> and <code>Description</code> candidates.</p>
</div>
<div class="paragraph">
<p>The fallback is a default <code>Title</code> and <code>Description</code> guaranteed to work.
The first attempt to find replacement candidates is by parsing just the URL.
This will work even if there is no Internet access, whereas the following attempts require Internet access.
The next attempt is by using the Jsoup library to parse the raw HTML into a Document object and obtain information likely to be present,
and the last attempt is by using the Readability4J library to process the Document object and extract metadata.
In this way, the last successful attempt to replace <code>Title</code> and <code>Description</code> becomes their current best replacement candidate.
Since we cascade from the last choice to the first choice for <code>Title</code> and <code>Description</code> separately,
by the end we have found the best possible replacement candidate for each of them given the circumstances.
However, replacement candidates are only chosen if the original <code>Title</code> and <code>Description</code> are empty,
so the original user input is still the first choice, followed by the best replacement candidates found.</p>
</div>
<div class="paragraph">
<p>This means that if both <code>Title</code> and <code>Description</code> are already specified by the user, <code>AddCommand</code> just adds the <code>Entry</code> to the <code>Model</code>.
Otherwise, <code>AddCommand</code> attempts to find replacement candidates for a missing <code>Title</code> or <code>Description</code> heuristically,
then updates the <code>Entry</code> with the best replacement and adds it to the <code>Model</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-where-autofill-should-be-carried-out"><a class="link" href="#aspect-where-autofill-should-be-carried-out">Aspect: Where autofill should be carried out</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> In <code>AddCommand</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: The pattern of keeping logic within <code>Command</code> is followed by containing autofill logic within <code>AddCommand</code>.</p>
</li>
<li>
<p>Cons: Autofill only works for links added through <code>AddCommand</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> In <code>Model</code></p>
<div class="ulist">
<ul>
<li>
<p>Pros: Autofill can work for any link added to <code>Model</code>.</p>
</li>
<li>
<p>Cons: The clean <code>Model</code> is polluted by including non-core logic like autofill.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Why current choice:</strong></p>
<div class="ulist">
<ul>
<li>
<p>It is more important to follow the existing design conventions since it is not hard to include autofill logic in other areas using the <code>EntryAutofill</code> utility class.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="aspect-how-replacement-candidates-should-be-cascaded"><a class="link" href="#aspect-how-replacement-candidates-should-be-cascaded">Aspect: How replacement candidates should be cascaded</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1:</strong> Check candidates are non-null and non-empty before replacing best candidate so far directly within <code>EntryAutofill</code> methods</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Simple to implement.</p>
</li>
<li>
<p>Cons: Messy and hard-to-read code.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2 (current choice):</strong> Create and use a new <code>Candidate</code> class that generalizes this idea to any type and any function that checks for candidate validity</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Can be reused in many places, more elegant code.</p>
</li>
<li>
<p>Cons: Abstraction may be unnecessary.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Why current choice:</strong></p>
<div class="ulist">
<ul>
<li>
<p>It is not hard to implement the <code>Candidate</code> class and the semantic beauty and elegance it affords is worth the small extra effort.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-15 15:50:28 UTC</div></div></div></body></html>