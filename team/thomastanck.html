<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Thomas Tan - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">README</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2103-AY1819S2-W10-1/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Thomas Tan - Project Portfolio</h1></div><div id="content"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Good day!
I am a Computer Science undergraduate
at the National University of Singapore (NUS).
This document showcases the contributions I made for a group term project.
I hope this shows you my abilities engineering software!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-readme"><a class="link" href="#project-readme">PROJECT: README</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>README is a desktop bookmark manager/RSS feed reader application.
README lets users store webpages for offline reading,
in addition to subscribing to feeds
so that their favourite content is automatically downloaded and delivered to them.</p>
</div>
<div class="paragraph">
<p>When looking at many other applications on the market for inspiration,
we found a big hole.
Most other applications do not support reading your saved links while offline,
and as such we decided it was a critical feature,
and I was placed in charge of this feature.
However, this requires integrating <code>Storage</code> and <code>Network</code> together,
which lie on opposite ends of the design.
This makes it a technically challenging feature,
interacting with most other components such as the <code>Model</code>.</p>
</div>
<div class="paragraph">
<p>Thus, the bulk of my contributions lie in figuring out
a good way to architect the overall design
so that it is easy to support this feature.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are contributions that I made to this application.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="strong-major-enhancement-strong-offline-mode"><a class="link" href="#strong-major-enhancement-strong-offline-mode"><strong>Major enhancement</strong>: Offline mode</a></h3>
<div class="paragraph">
<p>I implemented a local data store that stores articles so that they can be retrieved later even while offline.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Justification: Dramatically makes the application more useful
for users who are often on the go,
without an internet connection.</p>
</li>
<li>
<p>Highlights:</p>
<div class="ulist">
<ul>
<li>
<p>Automatic download: A copy of every article saved to the reading list
is saved so it can be viewed offline.</p>
</li>
<li>
<p>Refresh command: When pages get out of date,
the user can execute a command
to download an updated copy.</p>
</li>
<li>
<p>Absolute link conversion: Ensures most pages will continue to work properly
even while offline by converting relative links
that stop working when viewing pages offline,
to absolute links that work everywhere.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="strong-minor-enhancement-strong-adding-code-all-code-variants-of-commands"><a class="link" href="#strong-minor-enhancement-strong-adding-code-all-code-variants-of-commands"><strong>Minor enhancement</strong>: Adding <code>all</code> variants of commands</a></h4>
<div class="paragraph">
<p>Many commands like <code>refresh</code> and <code>archive</code> (by Jonathan)
only operate on single entries.
I added new commands such as <code>refreshall</code> and <code>archiveall</code>
that operate on all currently displayed entries for ease of use.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="strong-code-contributed-strong"><a class="link" href="#strong-code-contributed-strong"><strong>Code contributed</strong>:</a></h3>
<div class="paragraph">
<p>For an overview of all of code contributed by me, refer to the <a href="https://nus-cs2103-ay1819s2.github.io/cs2103-dashboard/#=undefined&amp;search=thomastanck">CS2103T module dashboard</a>!</p>
</div>
<div class="paragraph">
<p>Otherwise, refer to the links below to relevant pull requests for each enhancement.
Some enhancements are done over several pull requests, so all relevant ones are linked.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Offline mode</p>
<div class="ulist">
<ul>
<li>
<p>Network:
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/35">PR #35</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/36">PR #36</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/81">PR #81</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/203">PR #203</a></p>
</li>
<li>
<p>Absolute link conversion:
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/102">PR #102</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/186">PR #186</a></p>
</li>
<li>
<p>Automatic download:
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/39">PR #39</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/113">PR #113</a></p>
</li>
<li>
<p>Refresh:
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/133">PR #133</a>,
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/170">PR #170</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>all</code> commands:
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/190">PR #190</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="strong-other-contributions-strong"><a class="link" href="#strong-other-contributions-strong"><strong>Other contributions</strong>:</a></h4>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Set up issue tracker</p>
</li>
<li>
<p>Set up Travis, AppVeyor, Codacy, and Coveralls status checks.</p>
</li>
<li>
<p>Set up Branch Protection on <code>master</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Automatically scroll the list panel to the location of the added entry when adding links.</p>
</li>
<li>
<p>Automatically fill in a default tag when subscribing to a feed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Regularly review pull requests (PR).
While we mainly review through our private chat,
some are done directly on Github.
See <a href="https://github.com/CS2103-AY1819S2-W10-1/main/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+reviewed-by%3Athomastanck">here</a> for the complete list.</p>
</li>
<li>
<p>Otherwise, look below for PRs with non-trivial comments!</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/44">#44</a>
<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/184">#184</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Reported bugs and gave suggestions for another group&#8217;s project, <a href="https://github.com/CS2103-AY1819S2-W13-3/main">The Infinity Machine</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/161">#161</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/163">#163</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/166">#166</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/168">#168</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/171">#171</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/172">#172</a>
<a href="https://github.com/CS2103-AY1819S2-W13-3/main/issues/177">#177</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated a third party tool (PlantUML) to the project (<a href="https://github.com/CS2103-AY1819S2-W10-1/main/pull/18">#18</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide.
  They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="archiveallcommand"><a class="link" href="#archiveallcommand">Archiving all displayed entries: <code>archiveall</code></a></h4>
<div class="paragraph">
<p>If you want to archive many entries at the same time,
you can make use of this command to move all the currently displayed entries to the archive,
removing all entries' downloaded content at the same time.
By using a <a href="#findcommand"><code>find</code> command</a> first before executing <code>archiveall</code>,
you can archive parts of your reading list by a search criteria.</p>
</div>
<div class="paragraph">
<p><span class="underline">Format</span>: <code>archiveall</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Archives only entries that are currently displayed.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="underline">Examples</span>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Archive <strong>all</strong> entries in the reading list</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>list</code><br></p>
</li>
<li>
<p><code>archiveall</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Archive all entries tagged “infoTheory” (you may refer to the figures below)</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>list</code><br></p>
</li>
<li>
<p><code>find t/infoTheory</code><br></p>
</li>
<li>
<p><code>archiveall</code><br></p>
</li>
<li>
<p><code>list</code></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/find_archiveall.png" alt="find archiveall" width="650">
</div>
<div class="title">Figure 1. Filtering then archiving all infoTheory entries (steps 1-3)</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/find_archiveall_list.png" alt="find archiveall list" width="190">
</div>
<div class="title">Figure 2. Reading list now no longer has any infoTheory entries (step 4)</div>
</div>
</div>
<div class="sect3">
<h4 id="refreshing-an-entry-code-refresh-code"><a class="link" href="#refreshing-an-entry-code-refresh-code">Refreshing an entry: <code>refresh</code></a></h4>
<div class="paragraph">
<p>If you added an entry a long time ago and you think that the saved page might be outdated,
you can fetch the most updated version from the internet by using this command.
This is helpful for pages such as Wikipedia, which may change often!
See the <a href="#refreshallcommand"><code>refreshall</code> command</a> which may be useful to use if you need to refresh a large number of entries at the same time.</p>
</div>
<div class="paragraph">
<p><span class="underline">Format</span>: <code>refresh INDEX</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Refreshes the content of the entry at the specified <code>INDEX</code>.</p>
</li>
<li>
<p>The index refers to the index number shown in the displayed entry list.</p>
</li>
<li>
<p>The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="underline">Examples</span>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Refresh the content of the 2nd entry in the reading list.<br></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>list</code><br></p>
</li>
<li>
<p><code>refresh 2</code><br></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide.
  They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="network-design"><a class="link" href="#network-design"><code>Network</code> design</a></h3>
<div class="paragraph">
<p>As many components have to make network calls
to retrieve resources from the Internet,
we decided to centralise it in a "singleton" class named <code>Network</code>.
The following sections describe the different design patterns we considered
and their pros and cons.</p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p>This component is depended on by the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AddCommand (when adding articles so that they can be saved to disk)</p>
</li>
<li>
<p>BrowserPanel (when viewing articles or feeds)</p>
</li>
<li>
<p>Feeds management system (for fetching subscriptions, or saving feeds)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, our design needs to take into consideration how it is going to be used.</p>
</div>
<div class="paragraph">
<p>Because it&#8217;s possible that the settings we use to fetch resources
may need to be changed over time
(e.g. timeouts, request headers, cookies, etc.),
we should centralise the design to one component
so that these can easily be changed.
Obviously, this component should be easily accessible
from all the components listed above.
Finally, the interface for this component should be general
and apply to all use cases
because we have a large mix of possible requests:
articles, feeds, or other resources.</p>
</div>
<div class="paragraph">
<p>The only way we can make this component easily accessible is to make it global.
However, there are a couple of ways to design a global component.
The following sections describe the patterns considered.</p>
</div>
</div>
<div class="sect3">
<h4 id="static-class-pattern-chosen-pattern"><a class="link" href="#static-class-pattern-chosen-pattern">Static class pattern (chosen pattern)</a></h4>
<div class="paragraph">
<p>This pattern is to create a new class named <code>Network</code>.
This class is abstract so it cannot be instantiated,
and all its methods are marked <code>private</code>.</p>
</div>
<div class="sect4">
<h5 id="pros"><a class="link" href="#pros">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>Convenient access to the network</p>
</li>
<li>
<p>Good cohesion: everything with networking details in one file</p>
</li>
<li>
<p>Easy to write and subsequently modify</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons"><a class="link" href="#cons">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>Global variable,
which encourages coupling with everything else in the codebase</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="singleton-pattern"><a class="link" href="#singleton-pattern">Singleton pattern</a></h4>
<div class="paragraph">
<p>This pattern is very similar to the pattern above.
We create a new class named <code>Network</code>,
and a static getter method that returns a single instance of <code>Network</code>.
This allows us the flexibility of working with objects
rather than with static methods.</p>
</div>
<div class="sect4">
<h5 id="pros-2"><a class="link" href="#pros-2">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>Convenient access to the network</p>
</li>
<li>
<p>Good cohesion: everything with networking details in one file</p>
</li>
<li>
<p>A little bit harder to write, as we need to include the Singleton logic,
but still easy</p>
</li>
<li>
<p>Objects allow you to perform dependency-injection,
so the calling class can obtain the <code>Network</code> instance and pass it down</p>
</li>
<li>
<p>Has the option of extending the class to possibly allowing multiple instances
in the future</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-2"><a class="link" href="#cons-2">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>More work than the static class pattern</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ad-hoc-aka-no-pattern"><a class="link" href="#ad-hoc-aka-no-pattern">Ad-hoc aka no pattern</a></h4>
<div class="paragraph">
<p>We could also choose to directly call the network API
from whatever calling methods would have called <code>Network</code> before.
This is the simplest "pattern" as it involves not writing any code.</p>
</div>
<div class="sect4">
<h5 id="pros-3"><a class="link" href="#pros-3">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>No need to write any code</p>
</li>
<li>
<p>No coupling since there&#8217;s no code</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="cons-3"><a class="link" href="#cons-3">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>Bad cohesion: networking related code will be thrown all over the codebase.
If we were to switch to using a different API
or needing to change a particular detail in how the network API is called,
then we would need to change them in all the places
where the network API got called.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="comparison-of-methods-and-why-we-went-with-the-static-class-pattern"><a class="link" href="#comparison-of-methods-and-why-we-went-with-the-static-class-pattern">Comparison of methods and why we went with the static class pattern</a></h4>
<div class="paragraph">
<p>Ranking the patterns from least effort to most effort,
we have ad-hoc being the easiest,
followed by static class,
and finally singleton.</p>
</div>
<div class="paragraph">
<p>Generally, the less code, the better.
This is usually the primary consideration.
This means if there are two patterns
where both meet some minimum quality standard
but one takes more effort,
we should go with the one that takes less effort to write.</p>
</div>
<div class="paragraph">
<p>We did not choose the ad-hoc pattern
because we anticipate future changes to the networking code
as we take into account more details
like timeouts, asynchronicity, cookies, etc.
In other words,
this led us to prioritise good cohesion in our desired pattern.</p>
</div>
<div class="paragraph">
<p>However, aside from this, both singleton and static class pattern
have roughly the same benefits.
We do not yet need to consider things like dependency inversion
because <code>Network</code> calls are decidedly a very global concept
which makes it less applicable.
Using the singleton pattern would have improved testability of our code,
but it would have required rewriting many of our classes
to use dependency inversion,
and this makes the code more complex.</p>
</div>
<div class="paragraph">
<p>So this is why we went with the static class pattern,
which has effectively the same benefits as singleton
after ruling out dependency inversion,
and the static class pattern is easier to write than the singleton pattern.</p>
</div>
</div>
<div class="sect3">
<h4 id="asynchronous-network-calls"><a class="link" href="#asynchronous-network-calls">Asynchronous network calls</a></h4>
<div class="paragraph">
<p>As the entirety of addressbook-level4 (AB4) is written synchronously,
it is a major undertaking to convert AB4 to use asynchronous (async) network calls.
We did a small scale experiment to see how async might be done by making
the <code>select</code> command download un-downloaded articles in the background.</p>
</div>
<div class="paragraph">
<p>Here is a sequence diagram showing how the interaction works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SelectRefreshSdForStorage.png" alt="SelectRefreshSdForStorage" width="600">
</div>
<div class="title">Figure 3. Sequence diagram from select command to article saving</div>
</div>
<div class="paragraph">
<p>Notice that when returning from the async network call,
we wrap our code in <code>Platform.runLater(&#8230;&#8203;)</code> to ensure that the rest of the
execution is done on the JavaFX Application Thread.
This helps to prevent certain race conditions from potentially ruining the model.</p>
</div>
<div class="paragraph">
<p>However, in the process of implementing this,
we found that it made testing this unreliable
as we could no longer be sure when the command has "truly" finished executing.
Thus, we decided to defer the conversion of the rest of the AB4 to async
to the v2.0 milestone.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="storage-component"><a class="link" href="#storage-component">Storage component</a></h3>
<div class="imageblock">
<div class="content">
<img src="../images/StorageClassDiagram.png" alt="StorageClassDiagram" width="600">
</div>
<div class="title">Figure 4. Structure of the Storage Component</div>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="{repoURL}/src/main/java/seedu/address/storage/Storage.java"><code>Storage.java</code></a></p>
</div>
<div class="paragraph">
<p>The <code>Storage</code> component,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>can save <code>UserPref</code> objects, and <code>EntryBook</code> data (for Reading List, Archives, and Feeds) in json format and read it back.</p>
</li>
<li>
<p>can save .html articles in a data directory as individual files. The article contents are only read when required by the user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unlike the <code>UserPref</code> and <code>EntryBook</code> data, we don&#8217;t store the articles in a flat file.
This is because the file size of the article store is much larger than the file sizes of all the prefs and reading list/archives/etc. combined,
so having it in a flat file would drastically slow down the application.</p>
</div>
<div class="paragraph">
<p>Instead, the files are saved to disk and are not read until the user clicks on an entry and wants to view it offline.</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="offline-mode"><a class="link" href="#offline-mode">Offline mode</a></h3>
<div class="paragraph">
<p>Offline mode requires many changes to the architecture as a whole.
The main point of conflict is that we need to store many articles to disk
but not keep their full contents in memory.
This means the full state is no longer stored within <code>EntryBook</code> anymore.
The following sections describe
the design decisions made to support offline mode.</p>
</div>
<div class="sect3">
<h4 id="architectural-changes"><a class="link" href="#architectural-changes">Architectural changes</a></h4>
<div class="sect4">
<h5 id="removing-undo-redo-feature"><a class="link" href="#removing-undo-redo-feature">Removing undo/redo feature</a></h5>
<div class="paragraph">
<p>The undo/redo feature assumes that a <code>ReadOnlyEntryBook</code>
contains all the information in an <code>EntryBook</code>
and that it can be used to restore an <code>EntryBook</code> to any prior state.
However, this assumption no longer holds if we were to store articles on disk
but not keep them in memory.</p>
</div>
<div class="paragraph">
<p>Instead of modifying the design of undo/redo,
we decided to simply remove the feature as it was not a core feature
required in our user stories.</p>
</div>
</div>
<div class="sect4">
<h5 id="moving-code-storage-code-behind-code-model-code"><a class="link" href="#moving-code-storage-code-behind-code-model-code">Moving <code>Storage</code> behind <code>Model</code></a></h5>
<div class="paragraph">
<p>Because we now have state that exists on the disk but not in memory,
we want to reflect this as well in the design.</p>
</div>
<div class="paragraph">
<p>State belongs in the <code>Model</code> abstraction layer,
but at the same time disk access belongs inside <code>Storage</code>.
We decided it was not wise to keep these too decoupled,
and instead we moved <code>Storage</code> under <code>Model</code>
to improve cohesion at the expense of worsening coupling.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current implementation</a></h4>
<div class="paragraph">
<p>After the architectural changes were made,
there are a few design considerations that needed to be made:</p>
</div>
<div class="sect4">
<h5 id="code-network-code-design"><a class="link" href="#code-network-code-design"><code>Network</code> design</a></h5>
<div class="paragraph">
<p>As we need to save the articles to disk,
we first need a way to obtain said articles from the Internet.
This is described in section <a href="#network-design"><code>Network</code> design</a></p>
</div>
</div>
<div class="sect4">
<h5 id="interfacing-with-browserpanel"><a class="link" href="#interfacing-with-browserpanel">Interfacing with BrowserPanel</a></h5>
<div class="paragraph">
<p>Currently, <code>Storage</code> provides a method that returns an Optional&lt;Path&gt;,
which will contain the path to the offline copy if it exists.
This is because <code>BrowserPanel</code> works by displaying URLs in a <code>WebView</code>.
Thus, by directly supplying the path,
it&#8217;s better than reading the content into a String,
in case there are any encoding issues.</p>
</div>
</div>
<div class="sect4">
<h5 id="storage-model"><a class="link" href="#storage-model">Storage model</a></h5>
<div class="paragraph">
<p>When saving articles to disk, we need to do so in a way that performs well.
This is described in section <a href="#Design-Storage">[Design-Storage]</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="viewing-an-entry-with-offline-mode"><a class="link" href="#viewing-an-entry-with-offline-mode">Viewing an entry with offline mode</a></h4>
<div class="paragraph">
<p>As an example, what happens when viewing an entry with offline mode enabled?
This is summarised by the activity diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/OfflineModeViewEntryActivityDiagram.png" alt="OfflineModeViewEntryActivityDiagram" width="600">
</div>
<div class="title">Figure 5. Activity diagram when viewing entry with offline mode</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-15 15:53:53 UTC</div></div></div></body></html>